{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import'./Card.css';import Api from'../../axios/Axios';import EditToDoList from'./EditToDoList';import AddToDoList from'./AddToDoList';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(_ref){var title=_ref.title,id=_ref.id,category=_ref.category,description=_ref.description,status=_ref.status,refresh=_ref.refresh,date=_ref.date;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addShow=_useState2[0],setAddShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editShow=_useState4[0],setEditShow=_useState4[1];var intervals=[{label:'ano',seconds:31536000000},{label:'mês',seconds:2592000000},{label:'dia',seconds:86400000},{label:'hora',seconds:3600000},{label:'minuto',seconds:60000},{label:'segundo',seconds:1000}];function timeSince(date){if(date!==undefined){}var seconds=Math.floor(Date.now()-date.getTime());if(seconds<1000){return'1 segundo atrás';}else{var interval=intervals.find(function(i){return i.seconds<seconds;});var count=Math.floor(seconds/interval.seconds);return\"\".concat(count,\" \").concat(interval.label).concat(count!==1?'s':'',\" atr\\xE1s.\");}}function closeAdd(){setEditShow(false);}var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var color='';var statusTitle='';if(status==1){statusTitle='Aberto';color='var(--1)';}else if(status==2){statusTitle='Em progresso';color='var(--2)';}else if(status==3){statusTitle='Concluido';color='var(--3)';}var colorCategory='';if(category=='1'){colorCategory='var(--2)';}else if(category=='2'){colorCategory='var(--3)';}else if(category=='3'){colorCategory='var(--1)';}else if(category=='4'){colorCategory='var(--4)';}function todolistMore(){if(show===true){setShow(false);}else{setShow(true);}}function deleteToDoList(){return _deleteToDoList.apply(this,arguments);}function _deleteToDoList(){_deleteToDoList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{Authorization:\"Bearer \".concat(sessionStorage.getItem('token'))}};body={id:id};_context.next=4;return Api.delete(\"/user/todolist/\".concat(id),config).then(function(){refresh();});case 4:case\"end\":return _context.stop();}}},_callee);}));return _deleteToDoList.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-item \".concat(status==true?'todolist-comply':''),children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:colorCategory},className:\"todolist-color\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"todolist-status\",children:status!==undefined?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:color},className:\"todolist-status-cicle\"}),/*#__PURE__*/_jsx(\"p\",{children:statusTitle})]}):/*#__PURE__*/_jsx(\"div\",{style:{height:'10px'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-container\",children:[/*#__PURE__*/_jsx(\"h5\",{onClick:function onClick(){todolistMore();},children:title}),show==false?description.split('')!==undefined?/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){todolistMore();},className:\"todolist-description\",children:description.split('').length<37?description:description.split('').slice(0,35).join('')+'...'}):'':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){todolistMore();},className:\"todolist-description\",children:description}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-btns-controler\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setEditShow(true);},className:\"todolist-btn-edit\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/iconedit.svg\"}),\"Editar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){deleteToDoList(id);},className:\"todolist-btn-delete\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/icondelete.svg\"}),\"Excluir\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-time\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/icontime.svg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"princial-article-time\",children:timeSince(new Date(date))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){todolistMore();},className:\"todolist-btns\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"todolist-more-btns\"}),/*#__PURE__*/_jsx(\"span\",{className:\"todolist-more-btns\"}),/*#__PURE__*/_jsx(\"span\",{className:\"todolist-more-btns\"})]})]},id),editShow===true?/*#__PURE__*/_jsx(EditToDoList,{closeAdd:closeAdd,itemId:id,itemTitle:title,itemDescription:description,itemCategory:category,itemStatus:status,refresh:refresh}):'',addShow===true?/*#__PURE__*/_jsx(AddToDoList,{closeAdd:closeAdd,refresh:refresh}):'']});};export default Card;","map":{"version":3,"names":["useState","Api","EditToDoList","AddToDoList","Card","title","id","category","description","status","refresh","date","addShow","setAddShow","editShow","setEditShow","intervals","label","seconds","timeSince","undefined","Math","floor","Date","now","getTime","interval","find","i","count","closeAdd","show","setShow","color","statusTitle","colorCategory","todolistMore","deleteToDoList","config","headers","Authorization","sessionStorage","getItem","body","delete","then","backgroundColor","height","split","length","slice","join"],"sources":["/Users/mateusdavila/Desktop/code/intercambio/front/src/components/toDoList/Card.js"],"sourcesContent":["import {useState} from 'react'\nimport './Card.css';\nimport Api from '../../axios/Axios';\nimport EditToDoList from './EditToDoList';\nimport AddToDoList from './AddToDoList';\nconst Card = ({title,id,category,description, status, refresh, date}) => {\n\n  const [addShow, setAddShow] = useState(false)\n  const [editShow, setEditShow] = useState(false)\n\n  \n\n\n  const intervals = [\n    { label: 'ano', seconds: 31536000000 },\n    { label: 'mês', seconds: 2592000000 },\n    { label: 'dia', seconds: 86400000 },\n    { label: 'hora', seconds: 3600000 },\n    { label: 'minuto', seconds: 60000 },\n    { label: 'segundo', seconds: 1000 }\n  ];\n  \n  \n  function timeSince(date) {\n    if(date !== undefined){\n    }\n    const seconds = Math.floor((Date.now() - date.getTime()));\n    if(seconds<1000){\n      return '1 segundo atrás'\n    } else{\n      const interval = intervals.find(i => i.seconds < seconds);\n      const count = Math.floor(seconds / interval.seconds);\n      return `${count} ${interval.label}${count !== 1 ? 's' : ''} atrás.`;\n\n    }\n    \n  }\n\n\n  function closeAdd(){\n    setEditShow(false)  \n  }\n\n  const [show,setShow] = useState(false)\n  let color = ''\n  let statusTitle = ''\n\n  if(status == 1){\n    statusTitle = 'Aberto'\n    color = 'var(--1)'\n  } else if(status ==2){\n    statusTitle = 'Em progresso'\n    color = 'var(--2)'\n\n  } else if(status ==3){\n    statusTitle = 'Concluido'\n    color = 'var(--3)'\n\n    }\n\n\n    let colorCategory = ''\n  if(category == '1'){\n    colorCategory = 'var(--2)'\n  }  else if(category == '2'){\n    colorCategory = 'var(--3)'\n  }  else if(category == '3'){\n    colorCategory = 'var(--1)'\n  }  else if (category == '4'){\n    colorCategory = 'var(--4)'\n  }\n\n  function todolistMore(){\n    if(show === true){\n      setShow(false)\n    } else{\n      setShow(true)\n    }\n  }\n  \n\n  async function deleteToDoList(){\n    const config = {\n      headers: { \n        Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n    };\n    const body = {id:id}\n    \n    await Api.delete(`/user/todolist/${id}`,config).then(()=>{  \n      refresh() \n    })\n\n\n  }\n\n\n  return (\n    \n    <>\n    \n      <div  className={`todolist-item ${status == true? 'todolist-comply':''}`} key={id}>\n            <div style={{backgroundColor:colorCategory}} className={`todolist-color`}></div>\n            <div className=\"todolist-text\">\n              <div className=\"todolist-status\">\n                 {status!== undefined? \n                 <>\n                  <div style={{backgroundColor:color}} className={`todolist-status-cicle`}></div>\n                    <p>{statusTitle}</p>\n                 </>\n                 :<div style={{height:'10px'}}></div>} \n              </div>\n              <div className=\"todolist-container\">\n                <h5 onClick={()=>{todolistMore()}}>{title}</h5>\n                {show == false ? \n                   description.split('') !== undefined ? \n                   <p onClick={()=>{todolistMore()}} className=\"todolist-description\"> \n                      {description.split('').length < 37 ? description :\n                      description.split('').slice(0,35).join('') +'...'\n                    }\n                    </p>\n                    \n                    :''\n                    :<>\n                    <p onClick={()=>{todolistMore()}} className=\"todolist-description\">\n                      {description}\n                      </p>\n                     \n                      <div className=\"todolist-btns-controler\">\n                          <button onClick={()=>{setEditShow(true)}} className=\"todolist-btn-edit\">\n                            <img src=\"./../../../img/icons/iconedit.svg\"/>\n                            Editar\n                          </button>\n                          <button onClick={()=>{deleteToDoList(id)}} className=\"todolist-btn-delete\">\n                            <img src=\"./../../../img/icons/icondelete.svg\"/>\n                            Excluir\n                          </button>\n                      </div>\n                      \n                    </>\n                      }\n                       <div className=\"todolist-time\">\n                                  <img src=\"./../../../img/icons/icontime.svg\" />\n                                  <p className=\"princial-article-time\">{timeSince(new Date(date))}</p>\n\n                              </div>\n\n              </div>\n            </div>\n            <div onClick={()=>{todolistMore()}} className=\"todolist-btns\">\n              <span className=\"todolist-more-btns\"></span>\n              <span className=\"todolist-more-btns\"></span>\n              <span className=\"todolist-more-btns\"></span>\n            </div>\n  </div>\n\n              {editShow === true? \n              <EditToDoList closeAdd={closeAdd} itemId={id} itemTitle={title} itemDescription={description} itemCategory={category} itemStatus={status} refresh={refresh}/> :''}\n              {addShow === true? <AddToDoList closeAdd={closeAdd} refresh={refresh}/> :''}\n\n                </>\n                \n  )\n}\n\nexport default Card"],"mappings":"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"},"metadata":{},"sourceType":"module"}