{"ast":null,"code":"var _jsxFileName = \"/Users/mateusdavila/Desktop/code/intercambio/front/src/components/toDoList/ToDoListPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport Api from \"../../axios/Axios\";\nimport Card from \"./Card\";\nimport './ToDoListPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ToDoListPage(_ref) {\n  _s();\n\n  let {\n    open,\n    inProgress,\n    finished,\n    refresh\n  } = _ref;\n  const [obj, setObj] = useState({\n    Todo: {\n      name: \"Aberto\",\n      color: \"#f29c9690\",\n      items: open\n    },\n    In_Progress: {\n      name: \"Em Progresso\",\n      color: \"#ede89f90\",\n      items: inProgress\n    },\n    Done: {\n      name: \"Finalizado\",\n      color: \"#96d9ad90\",\n      items: finished\n    }\n  });\n  const aOpen = open;\n  const aInProgress = inProgress;\n  const aFinishid = finished;\n\n  function event(result) {\n    const {\n      destination,\n      source\n    } = result;\n    if (!destination) return;\n\n    if (source.droppableId !== destination.droppableId) {\n      const newSourceObj = obj[source.droppableId];\n      const copiedSObj = [...newSourceObj.items];\n      const [reorderObj] = copiedSObj.splice(source.index, 1);\n      const newDestinationObj = obj[destination.droppableId];\n      const copiedDObj = [...newDestinationObj.items];\n      copiedDObj.splice(destination.index, 0, reorderObj);\n      setObj({ ...obj,\n        [source.droppableId]: { ...newSourceObj,\n          items: copiedSObj\n        },\n        [destination.droppableId]: { ...newDestinationObj,\n          items: copiedDObj\n        }\n      });\n    } else {\n      const newSourceObj = obj[source.droppableId];\n      const copiedSObj = [...newSourceObj.items];\n      const [reorderObj] = copiedSObj.splice(source.index, 1);\n      copiedSObj.splice(destination.index, 0, reorderObj);\n      setObj({ ...obj,\n        [source.droppableId]: { ...newSourceObj,\n          items: copiedSObj\n        }\n      });\n    }\n  }\n\n  const config = {\n    headers: {\n      Authorization: `Bearer ${sessionStorage.getItem('token')}`\n    }\n  };\n\n  async function updateToDoList(id, status, position, title, description, category) {\n    console.log(description);\n    const body = {\n      id: id,\n      status: status,\n      position: position,\n      title: title,\n      description: description,\n      category: category\n    };\n    await Api.patch('/user/todolist/', body, config);\n  }\n\n  useEffect(() => {\n    if (aOpen !== obj.Todo.items) {\n      obj.Todo.items.map((item, index) => {\n        updateToDoList(item.id, 1, index, item.title, item.description, item.category);\n        console.log(index);\n      });\n    }\n\n    if (aInProgress !== obj.In_Progress) {\n      obj.In_Progress.items.map((item, index) => {\n        updateToDoList(item.id, 2, index, item.title, item.description, item.category);\n      });\n    }\n\n    if (aFinishid !== obj.Done.items) {\n      obj.Done.items.map((item, index) => {\n        updateToDoList(item.id, 3, index, item.title, item.description, item.category);\n      });\n    }\n  }, [obj]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toDoList-page-tables\",\n      children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n        onDragEnd: result => event(result),\n        children: Object.keys(obj).map((res, index) => {\n          return /*#__PURE__*/_jsxDEV(Droppable, {\n            droppableId: `${res}`,\n            children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"toDoList-page-simple-table\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"toDoList-page-table-title\",\n                children: obj[res].name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"toDoList-page-counter\",\n                children: obj[res].items.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", { ...provided.droppableProps,\n                ref: provided.innerRef,\n                children: [obj[res].items.map((res, index) => {\n                  return /*#__PURE__*/_jsxDEV(Draggable, {\n                    draggableId: res.id.toString(),\n                    index: index,\n                    children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", { ...provided.draggableProps,\n                      ...provided.dragHandleProps,\n                      ref: provided.innerRef,\n                      style: { ...provided.draggableProps.style\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Card, {\n                        title: res.title,\n                        id: res.id,\n                        description: res.description,\n                        category: res.category,\n                        refresh: refresh\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 36\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 31\n                    }, this)\n                  }, res.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 27\n                  }, this);\n                }), provided.placeholder]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, this)\n          }, res, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(ToDoListPage, \"/xu1P6XCc61xga4QD2/8GyUww7g=\");\n\n_c = ToDoListPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ToDoListPage\");","map":{"version":3,"names":["React","useState","useEffect","DragDropContext","Droppable","Draggable","Api","Card","ToDoListPage","open","inProgress","finished","refresh","obj","setObj","Todo","name","color","items","In_Progress","Done","aOpen","aInProgress","aFinishid","event","result","destination","source","droppableId","newSourceObj","copiedSObj","reorderObj","splice","index","newDestinationObj","copiedDObj","config","headers","Authorization","sessionStorage","getItem","updateToDoList","id","status","position","title","description","category","console","log","body","patch","map","item","Object","keys","res","provided","snapshot","length","droppableProps","innerRef","toString","draggableProps","dragHandleProps","style","placeholder"],"sources":["/Users/mateusdavila/Desktop/code/intercambio/front/src/components/toDoList/ToDoListPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport Api from \"../../axios/Axios\";\nimport Card from \"./Card\";\nimport './ToDoListPage.css'\n\n\nexport default function ToDoListPage({open, inProgress, finished, refresh}) {\n\n\n      const [obj, setObj] = useState(\n        {\n                \n            Todo: {\n              name: \"Aberto\",\n              color: \"#f29c9690\",\n              items: open\n            \n            },\n            In_Progress: {\n              name: \"Em Progresso\",\n              color: \"#ede89f90\",\n              items: inProgress\n            },\n            Done: {\n              name: \"Finalizado\",\n              color: \"#96d9ad90\",\n              items: finished\n            }\n          \n    }\n      );\n\n    const aOpen = open\n    const aInProgress = inProgress\n    const aFinishid = finished\n\n\n\n\n\n  function event(result) {\n    const { destination, source } = result;\n    if (!destination) return;\n    if (source.droppableId !== destination.droppableId) {\n      const newSourceObj = obj[source.droppableId];\n      const copiedSObj = [...newSourceObj.items];\n      const [reorderObj] = copiedSObj.splice(source.index, 1);\n\n      const newDestinationObj = obj[destination.droppableId];\n      const copiedDObj = [...newDestinationObj.items];\n      copiedDObj.splice(destination.index, 0, reorderObj);\n\n      setObj({\n        ...obj,\n        [source.droppableId]: {\n          ...newSourceObj,\n          items: copiedSObj\n        },\n        [destination.droppableId]: {\n          ...newDestinationObj,\n          items: copiedDObj\n        }\n      });\n    } else {\n      const newSourceObj = obj[source.droppableId];\n      const copiedSObj = [...newSourceObj.items];\n      const [reorderObj] = copiedSObj.splice(source.index, 1);\n      copiedSObj.splice(destination.index, 0, reorderObj);\n      setObj({\n        ...obj,\n        [source.droppableId]: {\n          ...newSourceObj,\n          items: copiedSObj\n        }\n      });\n    }\n  }\n\n  \n  const config = {\n      headers: { Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n  };\n  \n  async function updateToDoList(id, status, position, title, description, category){\n    console.log(description)\n      const body = {id:id, status:status, position:position, title:title, description:description, category:category}\n      await Api.patch('/user/todolist/', body, config)\n  }\n  useEffect(()=>{\n      \n\n\n    if(aOpen !== obj.Todo.items){\n        obj.Todo.items.map((item, index)=>{\n            updateToDoList(item.id ,1, index, item.title, item.description,item.category)\n            console.log(index)\n        })\n        \n    }\n     if(aInProgress !== obj.In_Progress){\n        obj.In_Progress.items.map((item, index)=>{\n            updateToDoList(item.id ,2, index, item.title, item.description,item.category)\n        })\n        \n    }\n    if(aFinishid !== obj.Done.items){\n        obj.Done.items.map((item, index)=>{\n            updateToDoList(item.id ,3, index, item.title, item.description,item.category)\n        })\n        \n    }\n    \n\n\n  },[obj])\n  return (\n      <>\n      <div className=\"toDoList-page-tables\">\n        <DragDropContext onDragEnd={(result) => event(result)}>\n          {Object.keys(obj).map((res, index) => {\n            return (\n              <Droppable droppableId={`${res}`} key={res}>\n                {(provided, snapshot) => (\n                  <div className=\"toDoList-page-simple-table\" >\n                    <span className=\"toDoList-page-table-title\">\n                      {obj[res].name}\n                    </span>\n                    <span className=\"toDoList-page-counter\">\n                      {obj[res].items.length}\n                    </span>\n                    <div {...provided.droppableProps} ref={provided.innerRef} >\n                      {obj[res].items.map((res, index) => {\n                        return (\n                          <Draggable draggableId={(res.id).toString()} key={res.id} index={index} >\n                            {(provided, snapshot) => (\n                              <div\n                                {...provided.draggableProps}\n                                {...provided.dragHandleProps}\n                                ref={provided.innerRef}\n                                style={{\n                                  ...provided.draggableProps.style\n                                }}\n                              >\n                                  {<Card title={res.title} id={res.id} description={res.description} category={res.category} refresh={refresh}/>}\n\n                              </div>\n                            )}\n                          </Draggable>\n                        );\n                      })}\n                      {provided.placeholder}\n                    </div>\n                  </div>\n                )}\n              </Droppable>\n            );\n          })}\n        </DragDropContext>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}