{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import'./Perfil.css';import Skeleton,{SkeletonTheme}from'react-loading-skeleton';import Api from'../../../axios/Axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Perfil=function Perfil(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var local=localStorage.getItem('token');var session=sessionStorage.getItem('token');var token='';if(!session){if(!local){window.location.href='/login';}else{token=local;sessionStorage.setItem('token',local);}}else{token=session;}function getOptions(){return _getOptions.apply(this,arguments);}function _getOptions(){_getOptions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{Authorization:\"Bearer \".concat(token)}};_context.next=3;return Api.get('/user/useroptions',config).then(function(data){if(!data.data[0]){window.location.href='/createuseroptions';}else{setUser(data.data[0]);setLoading(true);}});case 3:case\"end\":return _context.stop();}}},_callee);}));return _getOptions.apply(this,arguments);}useEffect(function(){if(loading===false){getOptions();}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"perfil-box\",children:loading==true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"perfil-text\",children:[/*#__PURE__*/_jsx(\"h5\",{children:user.user.name}),/*#__PURE__*/_jsxs(\"p\",{children:[user.city,user.country]})]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(./../../../img/user/\".concat(user.photo,\")\")},className:\"photo-user\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/btnpurper.svg\",alt:\"Ver mais\"})})]}):/*#__PURE__*/_jsx(SkeletonTheme,{baseColor:\"var(--8)\",highlightColor:\"var(--11)\",children:/*#__PURE__*/_jsx(Skeleton,{style:{width:'50px',height:'50px',margin:'10px -0px 00px 0px',borderRadius:'40px'}})})});};export default Perfil;","map":{"version":3,"names":["useEffect","useState","Skeleton","SkeletonTheme","Api","Perfil","loading","setLoading","user","setUser","local","localStorage","getItem","session","sessionStorage","token","window","location","href","setItem","getOptions","config","headers","Authorization","get","then","data","name","city","country","backgroundImage","photo","width","height","margin","borderRadius"],"sources":["/Users/mateusdavila/Desktop/code/intercambio/front/src/components/navegation/perfil/Perfil.js"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport './Perfil.css'\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton'\nimport Api from '../../../axios/Axios'\n\nconst Perfil = () => {\n\n  const [loading,setLoading] = useState(false)\n  const [user,setUser] = useState([])\n  const local = localStorage.getItem('token');\n  const session = sessionStorage.getItem('token');\n  let token = ''\n  \n  if(!session){\n      if(!local){\n          window.location.href = '/login'\n      } else{\n        token = local\n          sessionStorage.setItem('token',local)\n      }\n  } else{\n    token = session\n  }\n  \n  async function getOptions(){\n      const config = {\n        headers: { Authorization: `Bearer ${token}` }\n    };\n      await Api.get('/user/useroptions', config).then((data)=>{\n        if(!data.data[0]){\n          window.location.href = '/createuseroptions'\n        } else{\n           setUser(data.data[0])\n           setLoading(true)\n        }\n      })\n    }\n\n    useEffect(()=>{\n      if(loading === false){\n        getOptions()\n      }\n    },[])\n  return (\n    <div className='perfil-box'>\n      {loading == true? \n        <>\n        <div className='perfil-text'>\n          <h5>{user.user.name}</h5>\n          <p>{user.city}{user.country}</p>\n        </div>\n          <div style={{backgroundImage: `url(./../../../img/user/${user.photo})`}}  className=\"photo-user\">\n            <img src=\"./../../../img/icons/btnpurper.svg\" alt=\"Ver mais\" />\n          </div>\n      </>\n      :\n      <SkeletonTheme baseColor=\"var(--8)\" highlightColor=\"var(--11)\">\n                    <Skeleton style={{width:'50px',height:'50px',margin:'10px -0px 00px 0px', borderRadius:'40px'}}/>\n\n        </SkeletonTheme>\n      }\n    </div>\n  )\n}\nexport default Perfil \n"],"mappings":"waAAA,OAAQA,SAAR,CAAmBC,QAAnB,KAAkC,OAAlC,CACA,MAAO,cAAP,CACA,MAAOC,SAAP,EAAmBC,aAAnB,KAAwC,wBAAxC,CACA,MAAOC,IAAP,KAAgB,sBAAhB,C,6IAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CAEnB,cAA6BJ,QAAQ,CAAC,KAAD,CAArC,wCAAOK,OAAP,eAAeC,UAAf,eACA,eAAuBN,QAAQ,CAAC,EAAD,CAA/B,yCAAOO,IAAP,eAAYC,OAAZ,eACA,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAMC,QAAO,CAAGC,cAAc,CAACF,OAAf,CAAuB,OAAvB,CAAhB,CACA,GAAIG,MAAK,CAAG,EAAZ,CAEA,GAAG,CAACF,OAAJ,CAAY,CACR,GAAG,CAACH,KAAJ,CAAU,CACNM,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,QAAvB,CACH,CAFD,IAEM,CACJH,KAAK,CAAGL,KAAR,CACEI,cAAc,CAACK,OAAf,CAAuB,OAAvB,CAA+BT,KAA/B,EACH,CACJ,CAPD,IAOM,CACJK,KAAK,CAAGF,OAAR,CACD,CAjBkB,QAmBJO,WAnBI,0IAmBnB,gJACUC,MADV,CACmB,CACbC,OAAO,CAAE,CAAEC,aAAa,kBAAYR,KAAZ,CAAf,CADI,CADnB,uBAIUX,IAAG,CAACoB,GAAJ,CAAQ,mBAAR,CAA6BH,MAA7B,EAAqCI,IAArC,CAA0C,SAACC,IAAD,CAAQ,CACtD,GAAG,CAACA,IAAI,CAACA,IAAL,CAAU,CAAV,CAAJ,CAAiB,CACfV,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,oBAAvB,CACD,CAFD,IAEM,CACHT,OAAO,CAACiB,IAAI,CAACA,IAAL,CAAU,CAAV,CAAD,CAAP,CACAnB,UAAU,CAAC,IAAD,CAAV,CACF,CACF,CAPK,CAJV,uDAnBmB,6CAiCjBP,SAAS,CAAC,UAAI,CACZ,GAAGM,OAAO,GAAK,KAAf,CAAqB,CACnBc,UAAU,GACX,CACF,CAJQ,CAIP,EAJO,CAAT,CAKF,mBACE,YAAK,SAAS,CAAC,YAAf,UACGd,OAAO,EAAI,IAAX,cACC,wCACA,aAAK,SAAS,CAAC,aAAf,wBACE,oBAAKE,IAAI,CAACA,IAAL,CAAUmB,IAAf,EADF,cAEE,qBAAInB,IAAI,CAACoB,IAAT,CAAepB,IAAI,CAACqB,OAApB,GAFF,GADA,cAKE,YAAK,KAAK,CAAE,CAACC,eAAe,mCAA6BtB,IAAI,CAACuB,KAAlC,KAAhB,CAAZ,CAA0E,SAAS,CAAC,YAApF,uBACE,YAAK,GAAG,CAAC,oCAAT,CAA8C,GAAG,CAAC,UAAlD,EADF,EALF,GADD,cAWD,KAAC,aAAD,EAAe,SAAS,CAAC,UAAzB,CAAoC,cAAc,CAAC,WAAnD,uBACc,KAAC,QAAD,EAAU,KAAK,CAAE,CAACC,KAAK,CAAC,MAAP,CAAcC,MAAM,CAAC,MAArB,CAA4BC,MAAM,CAAC,oBAAnC,CAAyDC,YAAY,CAAC,MAAtE,CAAjB,EADd,EAZF,EADF,CAoBD,CA1DD,CA2DA,cAAe9B,OAAf"},"metadata":{},"sourceType":"module"}