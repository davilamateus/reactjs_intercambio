{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{DragDropContext,Droppable,Draggable}from\"react-beautiful-dnd\";import Api from\"../../axios/Axios\";import Card from\"./Card\";import'./ToDoListTrello.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ToDoListPage(_ref){var open=_ref.open,inProgress=_ref.inProgress,finished=_ref.finished,refresh=_ref.refresh;var _useState=useState({Todo:{name:\"Aberto\",color:\"#f29c9690\",items:open},In_Progress:{name:\"Em Progresso\",color:\"#ede89f90\",items:inProgress},Done:{name:\"Finalizado\",color:\"#96d9ad90\",items:finished}}),_useState2=_slicedToArray(_useState,2),obj=_useState2[0],setObj=_useState2[1];var aOpen=open;var aInProgress=inProgress;var aFinishid=finished;function event(result){var destination=result.destination,source=result.source;if(!destination)return;if(source.droppableId!==destination.droppableId){var _objectSpread2;var newSourceObj=obj[source.droppableId];var copiedSObj=_toConsumableArray(newSourceObj.items);var _copiedSObj$splice=copiedSObj.splice(source.index,1),_copiedSObj$splice2=_slicedToArray(_copiedSObj$splice,1),reorderObj=_copiedSObj$splice2[0];var newDestinationObj=obj[destination.droppableId];var copiedDObj=_toConsumableArray(newDestinationObj.items);copiedDObj.splice(destination.index,0,reorderObj);setObj(_objectSpread(_objectSpread({},obj),{},(_objectSpread2={},_defineProperty(_objectSpread2,source.droppableId,_objectSpread(_objectSpread({},newSourceObj),{},{items:copiedSObj})),_defineProperty(_objectSpread2,destination.droppableId,_objectSpread(_objectSpread({},newDestinationObj),{},{items:copiedDObj})),_objectSpread2)));}else{var _newSourceObj=obj[source.droppableId];var _copiedSObj=_toConsumableArray(_newSourceObj.items);var _copiedSObj$splice3=_copiedSObj.splice(source.index,1),_copiedSObj$splice4=_slicedToArray(_copiedSObj$splice3,1),_reorderObj=_copiedSObj$splice4[0];_copiedSObj.splice(destination.index,0,_reorderObj);setObj(_objectSpread(_objectSpread({},obj),{},_defineProperty({},source.droppableId,_objectSpread(_objectSpread({},_newSourceObj),{},{items:_copiedSObj}))));}}var config={headers:{Authorization:\"Bearer \".concat(sessionStorage.getItem('token'))}};function updateToDoList(_x,_x2,_x3,_x4,_x5,_x6){return _updateToDoList.apply(this,arguments);}function _updateToDoList(){_updateToDoList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,status,position,title,description,category){var body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(description);body={id:id,status:status,position:position,title:title,description:description,category:category};_context.next=4;return Api.patch('/user/todolist/',body,config);case 4:case\"end\":return _context.stop();}}},_callee);}));return _updateToDoList.apply(this,arguments);}useEffect(function(){if(aOpen!==obj.Todo.items){obj.Todo.items.map(function(item,index){updateToDoList(item.id,1,index,item.title,item.description,item.category);});}if(aInProgress!==obj.In_Progress){obj.In_Progress.items.map(function(item,index){updateToDoList(item.id,2,index,item.title,item.description,item.category);});}if(aFinishid!==obj.Done.items){obj.Done.items.map(function(item,index){updateToDoList(item.id,3,index,item.title,item.description,item.category);});}},[obj]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"toDoList-page-tables\",children:/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:function onDragEnd(result){return event(result);},children:Object.keys(obj).map(function(res,index){return/*#__PURE__*/_jsx(Droppable,{droppableId:\"\".concat(res),children:function children(provided,snapshot){return/*#__PURE__*/_jsxs(\"div\",{className:\"toDoList-page-simple-table\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"toDoList-page-table-title\",children:obj[res].name}),/*#__PURE__*/_jsx(\"span\",{className:\"toDoList-page-counter\",children:obj[res].items.length}),/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},provided.droppableProps),{},{ref:provided.innerRef,children:[obj[res].items.map(function(res,index){return/*#__PURE__*/_jsx(Draggable,{draggableId:res.id.toString(),index:index,children:function children(provided,snapshot){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread(_objectSpread({},provided.draggableProps),provided.dragHandleProps),{},{ref:provided.innerRef,style:_objectSpread({},provided.draggableProps.style),children:/*#__PURE__*/_jsx(Card,{date:res.createdAt,title:res.title,status:res.status,id:res.id,description:res.description,category:res.category,refresh:refresh})}));}},res.id);}),provided.placeholder]}))]});}},res);})})})});}","map":{"version":3,"names":["React","useState","useEffect","DragDropContext","Droppable","Draggable","Api","Card","ToDoListPage","open","inProgress","finished","refresh","Todo","name","color","items","In_Progress","Done","obj","setObj","aOpen","aInProgress","aFinishid","event","result","destination","source","droppableId","newSourceObj","copiedSObj","splice","index","reorderObj","newDestinationObj","copiedDObj","config","headers","Authorization","sessionStorage","getItem","updateToDoList","id","status","position","title","description","category","console","log","body","patch","map","item","Object","keys","res","provided","snapshot","length","droppableProps","innerRef","toString","draggableProps","dragHandleProps","style","createdAt","placeholder"],"sources":["/Users/mateusdavila/Desktop/code/intercambio/front/src/components/toDoList/ToDoListTrello.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport Api from \"../../axios/Axios\";\nimport Card from \"./Card\";\nimport './ToDoListTrello.css'\n\n\nexport default function ToDoListPage({open, inProgress, finished, refresh}) {\n\n\n      const [obj, setObj] = useState(\n        {\n                \n            Todo: {\n              name: \"Aberto\",\n              color: \"#f29c9690\",\n              items: open\n            \n            },\n            In_Progress: {\n              name: \"Em Progresso\",\n              color: \"#ede89f90\",\n              items: inProgress\n            },\n            Done: {\n              name: \"Finalizado\",\n              color: \"#96d9ad90\",\n              items: finished\n            }\n          \n    }\n      );\n\n    const aOpen = open\n    const aInProgress = inProgress\n    const aFinishid = finished\n\n\n\n\n\n  function event(result) {\n    const { destination, source } = result;\n    if (!destination) return;\n    if (source.droppableId !== destination.droppableId) {\n      const newSourceObj = obj[source.droppableId];\n      const copiedSObj = [...newSourceObj.items];\n      const [reorderObj] = copiedSObj.splice(source.index, 1);\n\n      const newDestinationObj = obj[destination.droppableId];\n      const copiedDObj = [...newDestinationObj.items];\n      copiedDObj.splice(destination.index, 0, reorderObj);\n\n      setObj({\n        ...obj,\n        [source.droppableId]: {\n          ...newSourceObj,\n          items: copiedSObj\n        },\n        [destination.droppableId]: {\n          ...newDestinationObj,\n          items: copiedDObj\n        }\n      });\n    } else {\n      const newSourceObj = obj[source.droppableId];\n      const copiedSObj = [...newSourceObj.items];\n      const [reorderObj] = copiedSObj.splice(source.index, 1);\n      copiedSObj.splice(destination.index, 0, reorderObj);\n      setObj({\n        ...obj,\n        [source.droppableId]: {\n          ...newSourceObj,\n          items: copiedSObj\n        }\n      });\n    }\n  }\n\n  \n  const config = {\n      headers: { Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n  };\n  \n  async function updateToDoList(id, status, position, title, description, category){\n    console.log(description)\n      const body = {id:id, status:status, position:position, title:title, description:description, category:category}\n      await Api.patch('/user/todolist/', body, config)\n  }\n  useEffect(()=>{\n      \n\n\n    if(aOpen !== obj.Todo.items){\n        obj.Todo.items.map((item, index)=>{\n            updateToDoList(item.id ,1, index, item.title, item.description,item.category)\n        })\n        \n    }\n     if(aInProgress !== obj.In_Progress){\n        obj.In_Progress.items.map((item, index)=>{\n            updateToDoList(item.id ,2, index, item.title, item.description,item.category)\n        })\n        \n    }\n    if(aFinishid !== obj.Done.items){\n        obj.Done.items.map((item, index)=>{\n            updateToDoList(item.id ,3, index, item.title, item.description,item.category)\n        })\n        \n    }\n    \n\n\n  },[obj])\n  return (\n      <>\n      <div className=\"toDoList-page-tables\">\n        <DragDropContext onDragEnd={(result) => event(result)}>\n          {Object.keys(obj).map((res, index) => {\n            return (\n              <Droppable droppableId={`${res}`} key={res}>\n                {(provided, snapshot) => (\n                  <div className=\"toDoList-page-simple-table\" >\n                    <span className=\"toDoList-page-table-title\">\n                      {obj[res].name}\n                    </span>\n                    <span className=\"toDoList-page-counter\">\n                      {obj[res].items.length}\n                    </span>\n                    <div {...provided.droppableProps} ref={provided.innerRef} >\n                      {obj[res].items.map((res, index) => {\n                        return (\n                          <Draggable draggableId={(res.id).toString()} key={res.id} index={index} >\n                            {(provided, snapshot) => (\n                              <div\n                                {...provided.draggableProps}\n                                {...provided.dragHandleProps}\n                                ref={provided.innerRef}\n                                style={{\n                                  ...provided.draggableProps.style\n                                }}\n                              >\n                                  {<Card  date={res.createdAt} title={res.title} status={res.status} id={res.id} description={res.description} category={res.category} refresh={refresh}/>}\n\n                              </div>\n                            )}\n                          </Draggable>\n                        );\n                      })}\n                      {provided.placeholder}\n                    </div>\n                  </div>\n                )}\n              </Droppable>\n            );\n          })}\n        </DragDropContext>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}