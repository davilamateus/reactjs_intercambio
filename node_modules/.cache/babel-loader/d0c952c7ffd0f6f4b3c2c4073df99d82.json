{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useRef}from'react';import'./FInance.css';import Api from'./../../axios/Axios';import Chart from'chart.js/auto';import Skeleton,{SkeletonTheme}from'react-loading-skeleton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Finance=function Finance(_ref){var goal=_ref.goal;var token=sessionStorage.getItem('token');var _useState=useState([{value:0}]),_useState2=_slicedToArray(_useState,2),finance=_useState2[0],setFinance=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),lessToGoal=_useState6[0],setLessToGoal=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),porcents=_useState8[0],setPorcents=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),graficStatus=_useState10[0],setGraficStatus=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];useEffect(function(){var customConfig={headers:{'Content-Type':'application/json',\"Authorization\":\"Bearer \".concat(token)}};function loadToDoList(){return _loadToDoList.apply(this,arguments);}function _loadToDoList(){_loadToDoList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Api('/user/finance',customConfig).then(function(data){setFinance(data.data);setLoading(true);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _loadToDoList.apply(this,arguments);}loadToDoList();},[]);var ctx2=document.getElementById('myChart2');useEffect(function(){if(goal!==undefined){setLessToGoal(goal-total);setGraficStatus(true);}},[goal]);useEffect(function(){if(finance!==undefined){setTotal(calc());}},[finance]);function calc(){var total=0;finance.map(function(item){total=total+item.value;});return total;}useEffect(function(){setLessToGoal((total-goal)*-1||0);if(goal!==undefined){setPorcents((total*100/goal).toFixed(1));}},[total]);var ctx=document.getElementById('myChart2');if(ctx!==undefined){var chartStatus=Chart.getChart(\"myChart2\");// <canvas> id\nif(chartStatus!=undefined){chartStatus.destroy();}var myChart2=new Chart(ctx2,{type:'doughnut',data:{labels:['Falta','Investido'],datasets:[{backgroundColor:['#F5F4F4','#9EC36E'],data:[lessToGoal,total],borderRadius:[0,12],borderWidth:10,borderColor:['#34efae00','#9EC36E'],borderAlign:'center',spacing:-2}]},options:{responsive:true,plugins:{labels:{display:false},legend:{display:false}},scales:{y:{display:false},x:{display:false}}}});}return/*#__PURE__*/_jsx(\"div\",{className:\"finance-box\",children:loading==true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box-header\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Financeiro\"}),/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/btnpurper.svg\",alt:\"Adicionar\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"finance-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"finance-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"finance-left-top\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Investido:\"}),/*#__PURE__*/_jsx(\"h2\",{children:total})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"finance-left-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Faltam:\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"finance-lessToFoal\",children:lessToGoal})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Planejamento:\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"finance-goal\",children:goal})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"finance-right\",children:[/*#__PURE__*/_jsx(\"canvas\",{id:\"myChart2\",width:\"100px\",height:\"50px\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"finance-porcents\",children:[porcents,\"%\"]})]})]})]}):/*#__PURE__*/_jsxs(SkeletonTheme,{baseColor:\"var(--8)\",highlightColor:\"var(--11)\",children:[/*#__PURE__*/_jsx(Skeleton,{style:{width:'150px',height:'30px',margin:'10px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Skeleton,{style:{width:'100px',height:'20px',margin:'3px 10px'}}),/*#__PURE__*/_jsx(Skeleton,{style:{width:'120px',height:'30px',margin:'3px 10px 25px 10px'}}),/*#__PURE__*/_jsx(Skeleton,{style:{width:'100px',height:'20px',margin:'3px 10px'}}),/*#__PURE__*/_jsx(Skeleton,{style:{width:'120px',height:'30px',margin:'3px 10px 25px 10px'}}),/*#__PURE__*/_jsx(Skeleton,{style:{width:'100px',height:'20px',margin:'3px 10px'}}),/*#__PURE__*/_jsx(Skeleton,{style:{width:'120px',height:'30px',margin:'3px 10px 25px 10px'}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Skeleton,{style:{width:'150px',height:'150px',margin:'40px 10px',borderRadius:'100px'}})})]})]})});};export default Finance;","map":{"version":3,"names":["useEffect","useState","useRef","Api","Chart","Skeleton","SkeletonTheme","Finance","goal","token","sessionStorage","getItem","value","finance","setFinance","total","setTotal","lessToGoal","setLessToGoal","porcents","setPorcents","graficStatus","setGraficStatus","loading","setLoading","customConfig","headers","loadToDoList","then","data","ctx2","document","getElementById","undefined","calc","map","item","toFixed","ctx","chartStatus","getChart","destroy","myChart2","type","labels","datasets","backgroundColor","borderRadius","borderWidth","borderColor","borderAlign","spacing","options","responsive","plugins","display","legend","scales","y","x","width","height","margin"],"sources":["/Users/mateusdavila/Desktop/code/intercambio/front/src/components/finance/Finance.js"],"sourcesContent":["import {useEffect, useState, useRef} from 'react'\nimport './FInance.css'\nimport Api from './../../axios/Axios'\nimport Chart from 'chart.js/auto';\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton'\n\n\n\n\nconst Finance = ({goal}) => {\n\n  const token = sessionStorage.getItem('token');\n\n  const [finance,setFinance] = useState([{value:0}])\n  const [total,setTotal] = useState(0)\n  const [lessToGoal ,setLessToGoal] = useState(0)\n  const [porcents ,setPorcents] = useState(0)\n  const [graficStatus, setGraficStatus] = useState(false)\n  const [loading,setLoading] = useState(false)\n\n  useEffect(()=>{\n\n\n    const customConfig = {\n      headers: {\n      'Content-Type': 'application/json',\n      \"Authorization\" : `Bearer ${token}`\n      }\n  };\n\n\n    async function loadToDoList(){\n      await Api('/user/finance' ,customConfig).then((data)=>{\n        setFinance(data.data)\n        setLoading(true)\n      })\n    }\n    loadToDoList()\n  },[])\n  \n\n\n\n  \n      \n\n  const ctx2  = document.getElementById('myChart2')\n\n  useEffect(()=>{\n    if(goal !== undefined){\n      setLessToGoal(goal-total)\n      setGraficStatus(true)\n      \n    }\n\n  },[goal])\n  \n  useEffect(()=>{\n\n    if(finance !== undefined){\n\n        setTotal(calc())\n        \n      \n    }\n    \n  },[finance])\n\n  function calc(){\n    let total = 0\n    finance.map((item)=>{\n        total = total + item.value\n    })\n    return total\n  }\n\n  useEffect(()=>{\n    setLessToGoal((total-goal)*(-1) || 0)\n    if(goal !== undefined){\n      setPorcents(((total*100)/goal).toFixed(1))\n\n    }\n  },[total])\n  \n\n  const ctx = document.getElementById('myChart2');\n  if(ctx!== undefined){\n\n  \n    let chartStatus = Chart.getChart(\"myChart2\"); // <canvas> id\n    if (chartStatus != undefined) {\n      chartStatus.destroy();\n    }\n  \n\n\n  var myChart2 = new Chart(ctx2, {\n    type: 'doughnut',\n    data: {\n        labels: ['Falta', 'Investido'\n    ],\n        datasets: [{\n            backgroundColor:[\n                '#F5F4F4',\n                '#9EC36E'],\n            data: [(lessToGoal) , total],\n            borderRadius:[0,12],\n            borderWidth:10,\n            borderColor: ['#34efae00', '#9EC36E'],\n            borderAlign:'center',\n            spacing:-2,\n        }]\n    },\n    options: {\n        responsive: true,\n        plugins: {\n            labels: {\n                display: false,\n            },\n            legend: {\n                display: false,\n            },\n        },\n        scales: {\n            \n            y: {\n                display: false,\n            },\n            x: {\n                display: false ,\n            }           \n        }\n    },\n});\n\n\n\n}\n\n\n\n\n  \n  return (\n    <div className='finance-box'>\n            {loading == true ? \n                <>\n      <div className=\"box-header\">\n                <h5>Financeiro</h5>\n                <img src=\"./../../../img/icons/btnpurper.svg\" alt=\"Adicionar\" />\n          </div>\n          <div className='finance-container'>\n            \n                <div className=\"finance-left\">\n                  <div className=\"finance-left-top\">\n                    <p>Investido:</p>\n                    <h2>{total}</h2>\n                  </div>\n                  <div className=\"finance-left-bottom\">\n                    <div>\n                      <p>Faltam:</p>\n                      <h4 className='finance-lessToFoal'>{lessToGoal}</h4>\n                    </div>\n                    <div>\n                      <p>Planejamento:</p>\n                      <h4 className='finance-goal'>{goal}</h4>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"finance-right\">\n                  { <canvas  id=\"myChart2\" width=\"100px\" height=\"50px\"></canvas>\n}\n                <p className='finance-porcents'>{porcents}%</p>\n\n                </div>\n              \n            </div>\n            </>\n            :\n            \n            <SkeletonTheme baseColor=\"var(--8)\" highlightColor=\"var(--11)\">\n                <Skeleton style={{width:'150px',height:'30px', margin:'10px'}}/>\n                  <div style={{display:'flex'}}>\n                    <div>\n                      <Skeleton style={{width:'100px',height:'20px', margin:'3px 10px' }}/>\n                      <Skeleton style={{width:'120px',height:'30px', margin:'3px 10px 25px 10px' }}/>\n                      <Skeleton style={{width:'100px',height:'20px', margin:'3px 10px' }}/>\n                      <Skeleton style={{width:'120px',height:'30px', margin:'3px 10px 25px 10px' }}/>\n                      <Skeleton style={{width:'100px',height:'20px', margin:'3px 10px' }}/>\n                      <Skeleton style={{width:'120px',height:'30px', margin:'3px 10px 25px 10px' }}/>\n\n                    </div>\n                    <div>\n                      <Skeleton style={{width:'150px',height:'150px', margin:'40px 10px',borderRadius:'100px' }}/>\n\n                    </div>\n                  </div>\n            </SkeletonTheme>\n            \n          }\n\n          </div>\n  )\n}\n\nexport default Finance"],"mappings":"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"},"metadata":{},"sourceType":"module"}