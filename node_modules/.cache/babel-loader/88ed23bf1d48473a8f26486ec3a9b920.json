{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mateusdavila/Desktop/code/intercambio/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import'./Card.css';import Api from'../../axios/Axios';import EditToDoList from'./EditToDoList';import AddToDoList from'./AddToDoList';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(_ref){var item=_ref.item,refresh=_ref.refresh;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addShow=_useState2[0],setAddShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editShow=_useState4[0],setEditShow=_useState4[1];var intervals=[{label:'ano',seconds:31536000000},{label:'mês',seconds:2592000000},{label:'dia',seconds:86400000},{label:'hora',seconds:3600000},{label:'minuto',seconds:60000},{label:'segundo',seconds:1000}];function timeSince(date){if(date!==undefined){}var seconds=Math.floor(Date.now()-date.getTime());if(seconds<1000){return'1 segundo atrás';}else{var interval=intervals.find(function(i){return i.seconds<seconds;});var count=Math.floor(seconds/interval.seconds);return\"\".concat(count,\" \").concat(interval.label).concat(count!==1?'s':'',\" atr\\xE1s.\");}}function closeAdd(){setEditShow(false);}var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var color='';var statusTitle='';if(item.status==1){statusTitle='Aberto';color='var(--1)';}else if(item.status==2){statusTitle='Em progresso';color='var(--2)';}else if(item.status==3){statusTitle='Concluido';color='var(--3)';}var colorCategory='';if(item.category=='1'){colorCategory='var(--2)';}else if(item.category=='2'){colorCategory='var(--3)';}else if(item.category=='3'){colorCategory='var(--1)';}else if(item.category=='4'){colorCategory='var(--4)';}function todolistMore(){if(show===true){setShow(false);}else{setShow(true);}}function deleteToDoList(){return _deleteToDoList.apply(this,arguments);}function _deleteToDoList(){_deleteToDoList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{Authorization:\"Bearer \".concat(sessionStorage.getItem('token'))}};body={id:item.id};_context.next=4;return Api.delete(\"/user/todolist/\".concat(item.d),config).then(function(){refresh();});case 4:case\"end\":return _context.stop();}}},_callee);}));return _deleteToDoList.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-item \".concat(item.status==true?'todolist-comply':''),children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:colorCategory},className:\"todolist-color\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-text\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"todolist-status\",children:item.status!==undefined?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:color},className:\"todolist-status-cicle\"}),/*#__PURE__*/_jsx(\"p\",{children:statusTitle})]}):/*#__PURE__*/_jsx(\"div\",{style:{height:'10px'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-container\",children:[/*#__PURE__*/_jsx(\"h5\",{onClick:function onClick(){todolistMore();},children:item.title}),show==false?item.description.split('')!==undefined?/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){todolistMore();},className:\"todolist-description\",children:item.description.split('').length<37?item.description:item.description.split('').slice(0,35).join('')+'...'}):'':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){todolistMore();},className:\"todolist-description\",children:item.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-btns-controler\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setEditShow(true);},className:\"todolist-btn-edit\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/iconedit.svg\"}),\"Editar\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){deleteToDoList(item.id);},className:\"todolist-btn-delete\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/icondelete.svg\"}),\"Excluir\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"todolist-time\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"./../../../img/icons/icontime.svg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"princial-article-time\",children:timeSince(new Date(item.date))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){todolistMore();},className:\"todolist-btns\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"todolist-more-btns\"}),/*#__PURE__*/_jsx(\"span\",{className:\"todolist-more-btns\"}),/*#__PURE__*/_jsx(\"span\",{className:\"todolist-more-btns\"})]})]},item.id),editShow===true?/*#__PURE__*/_jsx(EditToDoList,{closeAdd:closeAdd,itemId:item.id,itemTitle:item.itle,itemDescription:item.description,itemCategory:item.category,itemStatus:item.status,refresh:refresh}):'',addShow===true?/*#__PURE__*/_jsx(AddToDoList,{closeAdd:closeAdd,refresh:refresh}):'']});};export default Card;","map":{"version":3,"names":["useState","Api","EditToDoList","AddToDoList","Card","item","refresh","addShow","setAddShow","editShow","setEditShow","intervals","label","seconds","timeSince","date","undefined","Math","floor","Date","now","getTime","interval","find","i","count","closeAdd","show","setShow","color","statusTitle","status","colorCategory","category","todolistMore","deleteToDoList","config","headers","Authorization","sessionStorage","getItem","body","id","delete","d","then","backgroundColor","height","title","description","split","length","slice","join","itle"],"sources":["/Users/mateusdavila/Desktop/code/intercambio/front/src/components/toDoList/Card.js"],"sourcesContent":["import {useState} from 'react'\nimport './Card.css';\nimport Api from '../../axios/Axios';\nimport EditToDoList from './EditToDoList';\nimport AddToDoList from './AddToDoList';\nconst Card = ({item, refresh}) => {\n\n  const [addShow, setAddShow] = useState(false)\n  const [editShow, setEditShow] = useState(false)\n\n  \n\n\n  const intervals = [\n    { label: 'ano', seconds: 31536000000 },\n    { label: 'mês', seconds: 2592000000 },\n    { label: 'dia', seconds: 86400000 },\n    { label: 'hora', seconds: 3600000 },\n    { label: 'minuto', seconds: 60000 },\n    { label: 'segundo', seconds: 1000 }\n  ];\n  \n  \n  function timeSince(date) {\n    if(date !== undefined){\n    }\n    const seconds = Math.floor((Date.now() - date.getTime()));\n    if(seconds<1000){\n      return '1 segundo atrás'\n    } else{\n      const interval = intervals.find(i => i.seconds < seconds);\n      const count = Math.floor(seconds / interval.seconds);\n      return `${count} ${interval.label}${count !== 1 ? 's' : ''} atrás.`;\n\n    }\n    \n  }\n\n\n  function closeAdd(){\n    setEditShow(false)  \n  }\n\n  const [show,setShow] = useState(false)\n  let color = ''\n  let statusTitle = ''\n\n  if(item.status == 1){\n    statusTitle = 'Aberto'\n    color = 'var(--1)'\n  } else if(item.status ==2){\n    statusTitle = 'Em progresso'\n    color = 'var(--2)'\n\n  } else if(item.status ==3){\n    statusTitle = 'Concluido'\n    color = 'var(--3)'\n\n    }\n\n\n    let colorCategory = ''\n  if(item.category == '1'){\n    colorCategory = 'var(--2)'\n  }  else if(item.category == '2'){\n    colorCategory = 'var(--3)'\n  }  else if(item.category == '3'){\n    colorCategory = 'var(--1)'\n  }  else if (item.category == '4'){\n    colorCategory = 'var(--4)'\n  }\n\n  function todolistMore(){\n    if(show === true){\n      setShow(false)\n    } else{\n      setShow(true)\n    }\n  }\n  \n\n  async function deleteToDoList(){\n    const config = {\n      headers: { \n        Authorization: `Bearer ${sessionStorage.getItem('token')}` }\n    };\n    const body = {id:item.id}\n    \n    await Api.delete(`/user/todolist/${item.d}`,config).then(()=>{  \n      refresh() \n    })\n\n\n  }\n\n\n  return (\n    \n    <>\n    \n      <div  className={`todolist-item ${item.status == true? 'todolist-comply':''}`} key={item.id}>\n            <div style={{backgroundColor:colorCategory}} className={`todolist-color`}></div>\n            <div className=\"todolist-text\">\n              <div className=\"todolist-status\">\n                 {item.status!== undefined? \n                 <>\n                  <div style={{backgroundColor:color}} className={`todolist-status-cicle`}></div>\n                    <p>{statusTitle}</p>\n                 </>\n                 :<div style={{height:'10px'}}></div>} \n              </div>\n              <div className=\"todolist-container\">\n                <h5 onClick={()=>{todolistMore()}}>{item.title}</h5>\n                {show == false ? \n                   item.description.split('') !== undefined ? \n                   <p onClick={()=>{todolistMore()}} className=\"todolist-description\"> \n                      {item.description.split('').length < 37 ? item.description :\n                      item.description.split('').slice(0,35).join('') +'...'\n                    }\n                    </p>\n                    \n                    :''\n                    :<>\n                    <p onClick={()=>{todolistMore()}} className=\"todolist-description\">\n                      {item.description}\n                      </p>\n                     \n                      <div className=\"todolist-btns-controler\">\n                          <button onClick={()=>{setEditShow(true)}} className=\"todolist-btn-edit\">\n                            <img src=\"./../../../img/icons/iconedit.svg\"/>\n                            Editar\n                          </button>\n                          <button onClick={()=>{deleteToDoList(item.id)}} className=\"todolist-btn-delete\">\n                            <img src=\"./../../../img/icons/icondelete.svg\"/>\n                            Excluir\n                          </button>\n                      </div>\n                      \n                    </>\n                      }\n                       <div className=\"todolist-time\">\n                                  <img src=\"./../../../img/icons/icontime.svg\" />\n                                  <p className=\"princial-article-time\">{timeSince(new Date(item.date))}</p>\n\n                              </div>\n\n              </div>\n            </div>\n            <div onClick={()=>{todolistMore()}} className=\"todolist-btns\">\n              <span className=\"todolist-more-btns\"></span>\n              <span className=\"todolist-more-btns\"></span>\n              <span className=\"todolist-more-btns\"></span>\n            </div>\n  </div>\n\n              {editShow === true? \n              <EditToDoList closeAdd={closeAdd} itemId={item.id} itemTitle={item.itle} itemDescription={item.description} itemCategory={item.category} itemStatus={item.status} refresh={refresh}/> :''}\n              {addShow === true? <AddToDoList closeAdd={closeAdd} refresh={refresh}/> :''}\n\n                </>\n                \n  )\n}\n\nexport default Card"],"mappings":"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"},"metadata":{},"sourceType":"module"}